## Тематика проекта: сайт [барбершопа](https://ru.wikipedia.org/wiki/Парикмахерская#Барбершоп).
## [Ссылка на работающий проект](https://vasily-kowalev.github.io/ITMO_practice_2/).
Сайт представляет собой [landing page](https://ru.wikipedia.org/wiki/Целевая_страница) с личным кабинетом.\
Проект сделан с использованием [Vue.js](https://ru.vuejs.org/).\
Ниже представлено описание основных разделов проекта.
### Описание структуры localStorage:
* Ключ: `users`, значение: список объектов пользователей.\
  Каждый объект пользователя имеет следующие поля:
  + Имя и фамилия (`fullName`);
  + Адрес эл. почты (`email`);
  + Номер мобильного телефона (`phone`);
  + Пароль (`pass`);
  + Список услуг (`orderedServices`) -  массив объектов заказанных услуг, каждая из которых имеет следующие поля:
    - Поля объекта услуги из массива `services`;
    - Дата и время заказа услуги (`serviceDateTime`);
    - Статус услуги (оказана или встреча только намечена) (`isActual`).
* Ключ: `services`, значение: массив объектов услуг (прайс-лист).\
  Каждый объект услуги имеет следующие поля:
  + id услуги (`id`);
  + Заголовок (`title`);
  + Цена (`price`);
  + Путь к тематической фотографии (`imagePath`).

  **Замечание**:\
  С одной стороны, нет необходимости хранить `id` внутри объекта услуги, так как на главной странице индекс объекта будет передаваться автоматически в функцию обработки события `click`, и при заказе одной из услуг её можно будет однозначно идентифицировать. Даже если какая-то из услуг будет удалена из массива `services`, на главной странице и в выпадающем списке в личном кабинете просто станет меньше объектов.\
  С другой стороны, если понадобится обновить какие-то данные внутри объектов массива `orderedServices` (например, заголовок услуги), то без `id` придётся сравнивать новое значение, хранящееся в `services`, со старым, хранящимся в `orderedServices`. Введение `id` упрощает доступ к элементам и, соответственно, изменение данных. В таком случае нет необходимости знать старое значение. К тому же это значение удобно использовать при выводе списка услуг через `v-for`, задав его в качестве ключа (`:key`).\
  Ссылаться из объекта массива `orderedServices` на индекс объекта массива `services` непрактично, так как этот объект просто может быть удалён или перемещён, поэтому свойства нужно именно **копировать** (например, через `Object.assign()`).
* Ключ: `currentUserId`, значение: индекс авторизованного пользователя в массиве `users` (по умолчанию `null`).
* Ключ: `keepLoggedIn`, значение: значение флажка **Запомнить меня (Keep me logged in)** (по умолчанию `true`).
### Описание главной страницы:
* На главной странице находится шапка с кнопкой **Авторизация (Sign in)** и **Регистрация (Sign up)**.
  + При нажатии на кнопку **Регистрация (Sign up)** появляется всплывающее окно со следующими элементами:
    - Поле **Имя и фамилия (Full name)**;
    - Поле **Адрес электронной почты (Email)**;
    - Поле **Номер мобильного телефона (Mobile phone number)**;
    - Поле **Пароль (минимум 6 знаков) (Password (6 characters minimum))**;
    - Поле **Повторить пароль (Password confirmation)**;
    - Кнопка отправки формы с текстом: **Регистрация (Sign up)**;
    - Ссылка на окно авторизации с текстом: **Авторизация (Sign in)**.
  + Происходит поиск в _localStorage_ в `users` по полям `email` и `phone`.
    - Если есть совпадение хотя бы по одному полю, то показать окно с ошибкой и оставить поля заполненными, кроме полей ввода паролей.\
    Текст ошибки: **Пользователь с (такой почтой)/(таким номером мобильного телефона) уже существует! (User with such (email)/(phone) already exist!)**.
    - Если совпадений нет, то производится регистрация пользователя (добавление нового объекта в `users`) и вход в личный кабинет.
  + При нажатии на кнопку **Авторизация (Sign in)** появляется всплывающее окно со следующими элементами:
    - Поле **Адрес электронной почты (Email)**;
    - Поле **Пароль (Password)**;
    - Флажок **Запомнить меня (Keep me logged in)**;
    - Кнопка отправки формы с текстом: **Авторизация (Sign in)**;
    - Ссылка на окно регистрации с текстом: **Регистрация (Sign up)**.
  + Происходит поиск в _localStorage_ по полю `email`.
    - Пользователя с такой почтой не существует? Ошибка: **Нет такого адреса электронной почты! (No such email address!)**;
    - Пользователь существует, но пароль не верен? Ошибка: **Неверный пароль! (Invalid password!)**;
    - Пользователь существует и пароль верен? Вход в личный кабинет.
* При появлении ошибок поля паролей очищаются.
* В один и тот же момент времени может быть открыто только одно всплывающее окно, либо ни одного.
* При нажатии на крестик (в правом верхнем углу) всплывающее окно закрывается.
* При регистрации или авторизации в _localStorage_ по ключу `currentUserId` записывается значение индекса авторизованного пользователя в массиве `users`.
* После регистрации или авторизации в шапке появляется такие элементы, как:
  + Ссылка на главную страницу (**Main page**) или ссылка на страницу личного кабинета (**Personal area**) в зависимости от того, где пользователь находится в данный момент;
  + Строка с именем и фамилией пользователя (например, **John Doe**);
  + Кнопка выхода из учётной записи с текстом: **Выход (Sign out)**.
* Функция запоминания включена по умолчанию. В _localStorage_ за хранение этого значения отвечает ключ `keepLoggedIn`. Если флажок **Запомнить меня (Keep me logged in)** был снят при авторизации, то `keepLoggedIn` после успешной авторизации устанавливается в `false` и при следующем появлении пользователя на сайте, во-первых, `currentUserId` принимает значение `null`, во-вторых, `keepLoggedIn` устанавливается снова в `true`.
* Каждая услуга в прайс-листе имеет:
  + Тематическую фотографию;
  + Заголовок;
  + Стоимость услуги;
  + Кнопку **Заказать (Order)** либо ссылку на личный кабинет.
* Если пользователь не авторизован, то при нажатии на кнопку **Заказать (Order)** появляется форма авторизации;
* Если пользователь авторизован, то вместо кнопки **Заказать (Order)** появляется ссылка на личный кабинет с текстом: **Заказать в личном кабинете (Order in personal area)**.
* При переходе по ссылке **Заказать в личном кабинете (Order in personal area)** пользователь переходит в личный кабинет, а в выпадающем меню активной становится та услуга, по ссылке на которую он перешёл (за это отвечает флаг `preferServiceIndex`). Таким образом, пользователю останется для подтверждения заказа только нажать кнопку **Заказать (Order)**.
### Описание личного кабинета:
* На странице присутствует таблица с полями:
  + **Дата и время (Date & Time)**;
  + **Заголовок услуги (Title)**;
  + **Цена (Price)**;
  + **Статус заказа (Status)**;
  + Поле с кнопкой **Отказаться (Cancel)** (если заявка является активной, за что отвечает флаг `isActual`).
* Заказы отсортированы по убыванию (в самом низу самые давние заказы).
* При нажатии на кнопку **Отказаться (Cancel)** появляется всплывающее окно с подтверждением.
  + В этом окне присутствуют:
    - Текст: **Вы действительно хотите отказаться от услуги "${service.title}"? (Do you really want to cancel the order "${service.title}"?))**;
    - Кнопка **Да (Yes)**;
    - Кнопка **Нет (No)**.
  + При нажатии на кнопку **Да (Yes)** объект услуги удаляется из массива `orderedServices` и из таблицы.
  + При нажатии на кнопку **Нет (No)** или на крестик окно исчезает.
* Также есть выпадающее меню со списком доступных для заказа услуг и кнопка заказа с текстом: **Заказать (Order)**. При выборе одной из услуг и нажатии на кнопку **Заказать (Order)** заказ добавляется в массив заказов пользователя `orderedServices` и тут же отображается в таблице.
  
  **Замечание**:\
  Подразумевается, что у компании есть админ-панель, в которой видно заявки всех пользователей, а также имеется расписание (в данном проекте не реализовано). При появлении заявки оператор связывается с пользователем, и они обсуждают день и час оказания услуги. Результатом этого является изменение значения поля `serviceDateTime` в массиве `orderedServices` данного пользователя с `"Unset"` на конкретную дату и время в формате `DD.MM.YYYY hh:mm` (смотри структуру хранилища данных).
* Здесь же присутствует флажок для фильтрации только активных заказов с текстом: **Показывать только активные заказы (Show active orders only)**.
### Структура хранилища данных:
``` JSON
"users": [
    {
        "fullName": "John Doe",
        "email": "john-doe@site.ru",
        "phone": "+01234567890",
        "pass": "secretPass",
        "orderedServices": [
            {
                "id": 1,
                "title": "Haircut",
                "price": 35.00,
                "imagePath": "public/img/services/haircut.jpg",
                "serviceDateTime": "11.03.2018 14:00",
                "isActual": true
            }
        ]
    },
    {
        "fullName": "myLogin",
        "email": "my-email@site.ru",
        "phone": "+09876543210",
        "pass": "myPass",
        "orderedServices": [
            {
                  "id": 1,
                  "title": "Haircut",
                  "price": 35.00,
                  "imagePath": "public/img/services/haircut.jpg",
                  "serviceDateTime": "20.11.2016 10:00",
                  "isActual": false
              },
              {
                  "id": 2,
                  "title": "Beard Service",
                  "price": 20.00,
                  "imagePath": "public/img/services/beardService.jpg",
                  "serviceDateTime": "Unset",
                  "isActual": true
              }
        ]
    }
],
"keepLoggedIn": true,
"currentUserId": 0,
"services": [
    {
        "id": 1,
        "title": "Haircut",
        "price": 35.00,
        "imagePath": "public/img/services/haircut.jpg"
    },
    {
        "id": 2,
        "title": "Beard Service",
        "price": 20.00,
        "imagePath": "public/img/services/beardService.jpg"
    }
]
```
